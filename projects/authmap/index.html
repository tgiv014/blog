<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Authmap | mntn.dev</title>
<meta name=keywords content="golang,ssh,linux">
<meta name=description content="A service that geolocates unwanted SSH attempts.">
<meta name=author content="Thomas Gorham">
<link rel=canonical href=https://mntn.dev/projects/authmap/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://mntn.dev/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://mntn.dev/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://mntn.dev/favicon-32x32.png>
<link rel=apple-touch-icon href=https://mntn.dev/apple-touch-icon.png>
<link rel=mask-icon href=https://mntn.dev/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Authmap">
<meta property="og:description" content="A service that geolocates unwanted SSH attempts.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mntn.dev/projects/authmap/"><meta property="article:section" content="projects">
<meta property="article:published_time" content="2021-02-06T12:00:00-05:00">
<meta property="article:modified_time" content="2021-02-06T12:00:00-05:00"><meta property="og:site_name" content="mntn.dev">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Authmap">
<meta name=twitter:description content="A service that geolocates unwanted SSH attempts.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://mntn.dev/projects/"},{"@type":"ListItem","position":2,"name":"Authmap","item":"https://mntn.dev/projects/authmap/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Authmap","name":"Authmap","description":"A service that geolocates unwanted SSH attempts.","keywords":["golang","ssh","linux"],"articleBody":"Shortly after opening up my home server’s ssh port to the world (with only public/private key auth enabled), I started getting a flood of attempted ssh requests from all over the place. Out of curiosity, I wanted to see them plotted out on my Grafana dashboard so I started putting together a small service that reads SSH authentication attempts, parses them, and pushes them into influxdb.\nThis project originally started out as my first foray into Rust. Pretty soon after that, I began experimenting with Golang for systems programming and decided to port what I had made so far into Go. Links for both versions below:\n Authmap (Rust) (Not maintained) Authmap (Go)  Goals I have a few goals to refine this project into something more useful:\n Remove every instance of hardcoding and read all configurables from a YAML file.  Done! Now, the only hardcoded configuration item is the config’s location. The application will also generate a default configuration automatically if a config is not found.   Allow grouping requests from the same IP/location in a smart way.  Done! The ip field is now a tag. This allows grouping by ip and aggregating results within those groups.   Automate downloading the MaxMind GeoIP database.  This will require user interaction since the database has licensing requirements now.   Make the docker container for this package more accessible.  Done! Authmap (go) is now available from docker hub as tgiv014/authmap:latest. See the Authmap repo for installation instructions and an example docker-compose configuration    ","wordCount":"245","inLanguage":"en","datePublished":"2021-02-06T12:00:00-05:00","dateModified":"2021-02-06T12:00:00-05:00","author":{"@type":"Person","name":"Thomas Gorham"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mntn.dev/projects/authmap/"},"publisher":{"@type":"Organization","name":"mntn.dev","logo":{"@type":"ImageObject","url":"https://mntn.dev/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://mntn.dev/ accesskey=h title="mntn.dev (Alt + H)">mntn.dev</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://mntn.dev/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li>
<li>
<a href=https://mntn.dev/projects/ title=projects>
<span>projects</span>
</a>
</li>
<li>
<a href=https://mntn.dev/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://mntn.dev/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://mntn.dev/>Home</a>&nbsp;»&nbsp;<a href=https://mntn.dev/projects/>Projects</a></div>
<h1 class=post-title>
Authmap
</h1>
<div class=post-meta><span title="2021-02-06 12:00:00 -0500 -0500">February 6, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Thomas Gorham&nbsp;|&nbsp;<a href=https://github.com/tgiv014/blog/projects/authmap/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><p><img loading=lazy src=/img/authmap.png alt="Authmap Image">
</p>
<p>Shortly after opening up my home server&rsquo;s ssh port to the world (with only public/private key auth enabled), I started getting a flood of attempted ssh requests from all over the place. Out of curiosity, I wanted to see them plotted out on my Grafana dashboard so I started putting together a small service that reads SSH authentication attempts, parses them, and pushes them into influxdb.</p>
<p>This project originally started out as my first foray into Rust. Pretty soon after that, I began experimenting with Golang for systems programming and decided to port what I had made so far into Go. Links for both versions below:</p>
<ul>
<li><a href=https://github.com/tgiv014/authmap>Authmap (Rust)</a> (Not maintained)</li>
<li><a href=https://github.com/tgiv014/authmap_go>Authmap (Go)</a></li>
</ul>
<h1 id=goals>Goals<a hidden class=anchor aria-hidden=true href=#goals>#</a></h1>
<p>I have a few goals to refine this project into something more useful:</p>
<ul>
<li>Remove every instance of hardcoding and read all configurables from a YAML file.
<ul>
<li>Done! Now, the only hardcoded configuration item is the config&rsquo;s location. The application will also generate a default configuration automatically if a config is not found.</li>
</ul>
</li>
<li>Allow grouping requests from the same IP/location in a smart way.
<ul>
<li>Done! The <code>ip</code> field is now a tag. This allows grouping by ip and aggregating results within those groups.</li>
</ul>
</li>
<li>Automate downloading the MaxMind GeoIP database.
<ul>
<li>This will require user interaction since the database has licensing requirements now.</li>
</ul>
</li>
<li>Make the docker container for this package more accessible.
<ul>
<li>Done! Authmap (go) is now available from docker hub as <code>tgiv014/authmap:latest</code>. See <a href=https://github.com/tgiv014/authmap_go>the Authmap repo</a> for installation instructions and an example docker-compose configuration</li>
</ul>
</li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://mntn.dev/tags/golang/>golang</a></li>
<li><a href=https://mntn.dev/tags/ssh/>ssh</a></li>
<li><a href=https://mntn.dev/tags/linux/>linux</a></li>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://mntn.dev/>mntn.dev</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>